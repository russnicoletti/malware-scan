package com.symphony.malware.scan.converter;

import com.symphony.malware.scan.MalwareScanRequest;
import com.symphony.malware.scan.model.MalwareScanRequestDto;

import java.util.Optional;

public class MalwareScanRequestConverter implements Converter<MalwareScanRequest, MalwareScanRequestDto> {

    @Override
    public MalwareScanRequestDto toDto(final MalwareScanRequest malwareScanRequest) {
        return Optional.ofNullable(malwareScanRequest)
            .map(msr -> MalwareScanRequestDto.builder()
                .streamId(msr.getStreamId())
                .messageId(msr.getMessageId())
                .actualIngestionDate(msr.getCreationTime())
                .build())
            .orElse(null);
    }

    @Override
    public MalwareScanRequest toProto(final MalwareScanRequestDto malwareScanRequestDto) {
        return Optional.ofNullable(malwareScanRequestDto)
            .map(msrd -> MalwareScanRequest.newBuilder()
                .setStreamId(malwareScanRequestDto.getStreamId())
                .setMessageId(malwareScanRequestDto.getMessageId())
                .setCreationTime(malwareScanRequestDto.getActualIngestionDate())
                .build())
            .orElse(null);
    }

}
